//     eelnss.js
//     (c) 20014-2019 Pawel Cesar Sanjuan Szklarz
//     eelnss may be freely distributed under the MIT license.
!function(n){function e(n,e){if(!n)throw e||"Assertion failed"}var r=n._||require("underscore"),t=function(n,e){var u=function(e,r){return n(e,r)};return u.get=u,u.set=e,u.mod=function(r,t){return e(r(n(t)),t)},u.eqClass=function(n){return function(e){return u.get(e)===n}},u.andThen=function(n){return t(r.compose(n,u),function(e,r){return u.mod(function(r){return n.set(e,r)},r)})},u.compose=function(n){return n.andThen(u)},u},u=t(function(){return void 0},function(n,e){return e}),i=t(function(n){return n},function(n){return n}),c=function(n,u){function i(e){var t=u||{},c=t.fillEmpty||!1;if(r.isUndefined(e))return void 0;if(r.isArray(e))return r.map(e,i);var o=e[n];return c&&r.isUndefined(o)?{}:o}function c(t,u){if(r.isUndefined(t))return r.omit(u,n);if(r.isArray(u))return e(r.isArray(t),"Field set mismatch of array levels. Field name:"+n+". Arguments:"+u+" , "+t),e(t.length===u.length,"Field set mismatch arrays length.Field name:"+n+". Arguments:"+u+" , "+t),r.zip(t,u).map(function(n){return c(n[0],n[1])});var i={};return i[n]=t,r.chain(u).clone().extend(i).value()}return t(i,c)},o=function(n){return t(function(e){return r.filter(e,n)},function(t,u){e(0===r.chain(t).reject(n).value().length,"Not all values belong to equality class");var i=r.chain(u).reject(n);return r.isUndefined(t)?i.value():i.union(t).value()})},f=/\[(:.*)\]/gi,a=function(n,e){return n.andThen(e)},l=function(n){var e=n.substr(1).split(":");return function(n){return r.chain(e).map(function(e){return o(c(e,{fillEmpty:!0}).eqClass(n[e]))}).reduce(a,i).value()}},s=function(n){return function(){return c(n,{fillEmpty:!0})}},d=function(n){var e=function(e){return r.map(n,function(n){return n.get(e)})},u=function(e,t){return r.reduce(r.zip(n,e),function(n,e){var r=e[0],t=e[1];return r.set(t,n)},t)};return t(e,u)};r.mixin({lenDef:t,lenNil:u,lenIdentity:i,fieldLen:c,setLen:o,buildLen:function(n){var e=n.split("."),t=r.chain(e).map(function(n){var e=f.exec(n);return null!==e?l(e[1]):s(n)}),u={bind:function(n){return t.map(function(e){return e(n)}).reduce(a,i).value()}};return u},telescope:d})}(this);
//# sourceMappingURL=eelnss-min.map