//     eelnss.js
//     (c) 20014-2019 Pawel Cesar Sanjuan Szklarz
//     eelnss may be freely distributed under the MIT license.
!function(n){function e(n,e){if(!n)throw e||"Assertion failed"}var r=n._||require("underscore"),t=function(n,e){var u=function(e){return n(e)};return u.get=u,u.set=e,u.mod=function(r,t){return e(r(n(t)),t)},u.eqClass=function(n){return function(e){return u.get(e)===n}},u.andThen=function(n){return t(r.compose(n,u),function(e,r){return u.mod(function(r){return n.set(e,r)},r)})},u.compose=function(n){return n.andThen(u)},u},u=t(function(){return void 0},function(n,e){return e}),i=t(function(n){return n},function(n){return n}),o=function(n){return function(u){function i(e){if(r.isUndefined(e))return void 0;if(r.isArray(e))return r.map(e,i);var t=e[u];return n&&r.isUndefined(t)?{}:t}function o(n,t){if(r.isUndefined(n))return r.omit(t,u);if(r.isArray(t))return e(r.isArray(n),"Field set mismatch of array levels. Field name:"+u+". Arguments:"+t+" , "+n),e(n.length===t.length,"Field set mismatch arrays length.Field name:"+u+". Arguments:"+t+" , "+n),r.zip(n,t).map(function(n){return o(n[0],n[1])});var i={};return i[u]=n,r.chain(t).clone().extend(i).value()}return t(i,o)}},c=function(n){return t(function(e){return r.filter(e,n)},function(t,u){e(0===r.chain(t).reject(n).value().length,"Not all values belong to equality class");var i=r.chain(u).reject(n);return r.isUndefined(t)?i.value():i.union(t).value()})},f=/\[(:.*)\]/gi,a=function(n,e){return n.andThen(e)},l=function(n){var e=n.substr(1).split(":");return function(n){return r.chain(e).map(function(e){return c(o(!0)(e).eqClass(n[e]))}).reduce(a,i).value()}},s=function(n){return function(){return o(!0)(n)}};r.mixin({lenDef:t,lenNil:u,lenId:i,fieldLen:o(!1),setLen:c,buildLen:function(n){var e=n.split("."),t=r.chain(e).map(function(n){var e=f.exec(n);return null!==e?l(e[1]):s(n)}),u={bind:function(n){return t.map(function(e){return e(n)}).reduce(a,i).value()}};return u}})}(this);
//# sourceMappingURL=eelnss-min.map